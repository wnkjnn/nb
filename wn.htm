<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" name="viewport">
  <title>官方页面</title>
<style>
 
    html, body {
      margin: 0; 
      padding: 0; 
      width: 100%; 
      height: 100%; 
      overflow: hidden; 
    }
    .content { 
      position: fixed; 
      width: 100%; 
      height: 100%; 
      left: 0; 
      top: 0; 
      border: none; 
    }
    .error-tip { 
      font-size: 24px; 
      color: skyblue; 
      text-align: center; 
      line-height: 100vh; 
      display: none; 
      padding: 0 20px; 
    }
  </style>
</head>
<body>
 <div class="error-tip">温柠@wnkkzc 海鸥:5896262</div>

  <script>
    const fetchWhiteList = async () => {
      try {
        const response = await fetch('https://qq.7qq.icu/whitelist.php'); 
        if (!response.ok) throw new Error('白名单接口请求失败');
        return await response.json();
      } catch (error) {
        console.error('白名单加载失败:', error.message);
        document.body.textContent = '温柠@wnkkzc 海鸥:5896262';
        return []; 
      }
    };

    document.addEventListener('DOMContentLoaded', async () => { 
      const WHITE_LIST = await fetchWhiteList();
      
      const urlParams = new URLSearchParams(window.location.search);
      const encodedParam = urlParams.get('c');
      
      if (!encodedParam) {
        document.body.textContent = '温柠@wnkkzc 海鸥:5896262';
        return;
      }

      try {
        const tureurl = decodeURIComponent(atob(encodedParam));
        if (!tureurl.startsWith('http')) throw new Error('URL必须以http/https开头');

        const url = new URL(tureurl);
        const domain = url.hostname;
        const isAllowed = WHITE_LIST.some(d => 
          domain.endsWith('.' + d) || domain === d
        );

        if (!isAllowed) {
          document.querySelector('.error-tip').style.display = 'block';
          return;
        }

        const iframe = document.createElement('iframe');
        iframe.className = 'content';
        iframe.src = tureurl;
        iframe.allow = 'same-origin';
        document.body.appendChild(iframe);
        
        if (iframe) bindMouseWheel(iframe);

      } catch (error) {
        console.error('页面加载失败:', error.message);
        document.body.textContent = error.message || '加载失败，请检查参数';
      }
    });

    const isFirefox = navigator.userAgent.includes('Firefox');

    function bindMouseWheel(iframe) {
      try {
        const doc = iframe.contentWindow.document;
        const handleWheel = (e) => {
          e.preventDefault();
          const delta = isFirefox ? e.detail * -50 : e.wheelDelta;
          doc.documentElement.scrollTop += delta;
        };

        doc.addEventListener(isFirefox ? 'DOMMouseScroll' : 'wheel', handleWheel);
      } catch (e) {
        console.warn('跨域限制:', e); 
      }
    }
  </script>
</body>
</html>
